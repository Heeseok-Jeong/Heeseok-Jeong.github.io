<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <!--Favicon-->
  <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.9.0/css/all.css"
    integrity="sha384-i1LQnF23gykqWXg6jxC2ZbCbUMxyw5gLZY6UiUS98LYV5unm8GWmfkIS6jqJfb4E" crossorigin="anonymous">

  <!-- Spoqa Han Sans -->
  <link href='//spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css' rel='stylesheet' type='text/css'>

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/main.css">

  <!-- OG Tag -->
  
  <meta name="title" content="Heeseok Jeong-Python Unittest" />
  <meta name="author" content="Heeseok Jeong" />
  <meta name="keywords" content="Python" />
  <meta name="description" content="단위 테스트" />
  <meta name="robots" content="index,follow" />

  <meta property="og:title" content="Heeseok Jeong-Python Unittest" />
  <meta property="og:description" content="단위 테스트" />
  <meta property="og:type" content="website, blog" />
  <meta property="og:image"
    content="http://localhost:4000/assets/img/smile.png" />
  <meta property="og:site_name" content="Heeseok Jeong" />
  <meta property="og:url" content="http://localhost:4000/2020/01/20/python-unittest.html" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Heeseok Jeong-Python Unittest" />
  <meta name="twitter:description" content="단위 테스트" />
  <meta name="twitter:image"
    content="http://localhost:4000/assets/img/smile.png" />

  <title>Heeseok Jeong-Python Unittest</title>
</head>

<body>
  <div class="container">
    

<header>
  <nav>
    <ul>
      
      <!-- others -->
      <a href="http://localhost:4000">
        <li class="current btn-nav">Blog</li>
      </a>
      <a href="http://localhost:4000/tags">
        <li class="btn-nav">Tags</li>
      </a>
      <a href="http://localhost:4000/portfolio">
        <li class="btn-nav">Portfolio</li>
      </a>
      
    </ul>
  </nav>
</header>
<div id="post">
  <section class="post-header">
    <h1 class="title">Python Unittest</h1>
    <p class="subtitle">단위 테스트</p>
    <p class="meta">
      January 20, 2020
    </p>
  </section>
  <section class="post-content">
    <h1 id="목차">목차</h1>
<ul>
  <li><a href="#단위-테스트란?">단위 테스트란?</a></li>
  <li><a href="#파이썬에서는-어떻게?">파이썬에서는 어떻게?</a></li>
</ul>

<p><br /></p>
<hr />

<p><br /></p>

<h1 id="단위-unit-테스트란">단위 (Unit) 테스트란?</h1>

<p>일반적으로 테스트는 어떤 대상이 목적에 맞게 행동하는지를 검사하는 것이다. 소프트웨어에서 테스트도 마찬가지이다.<br />
<br /></p>

<p>소프트웨어가 여러 개의 동작을 하는 함수들로 구성돼있을 때, 한 번에 모든 기능이 잘 동작하는지 살펴보는 것은 좋지 않다. 실패할 경우 어떤 부분에서 기능이 동작하지 않는지 알기 어렵기 때문이다. 따라서 단위 (Unit) 별로 기능을 테스트 해야한다.<br />
<br /></p>

<p>보통 유닛은 하나의 동작을 하도록 설계한다. 그러므로 단위 테스트는 하나의 동작이 잘 수행하는지 하나씩 살펴보는 작업이다.</p>

<p><br /></p>
<hr />

<p><br /></p>

<h1 id="파이썬에서는-어떻게">파이썬에서는 어떻게?</h1>

<p>파이썬은 유닛 테스트를 위한 각종 기능을 사용할 수 있는 <code class="language-plaintext highlighter-rouge">unittest</code> 모듈을 지원한다.
<br /></p>

<p>먼저 <code class="language-plaintext highlighter-rouge">unittest.TestCase</code> 를 상속한 테스트 케이스를 작성하고 그 밑에 픽스쳐부터 테스트까지 함수들을 정의한다.<br />
<br /></p>

<p>픽스쳐는 테스트 전, 후에 필요한 과정을 수행하는 동작을 말하며 이미 지정된 네이밍을 이용하여 이 단계를 수행하면 된다. 테스트 전에 실시해야할 사항을 수행하는 함수는 <code class="language-plaintext highlighter-rouge">setUp</code> 이고, 테스트 후에 실시해야할 사항을 수행하는 함수는 <code class="language-plaintext highlighter-rouge">tearDown</code> 이다.<br />
<br /></p>

<p>이제 테스트 수행 단계만 남았다. 테스트를 위해서는 테스트케이스 밑에 <code class="language-plaintext highlighter-rouge">test_</code> 로 시작하는 함수를 정의한다. 그리고 확인하고픈 유닛(메서드)을 <code class="language-plaintext highlighter-rouge">assert</code> 계열 함수들로 검사해주면 된다. 그 중 하나인 <code class="language-plaintext highlighter-rouge">assertEqual</code> 는 첫 번째 인자로 유닛의 결과를 넣고 두 번째 인자로 정답을 넣어주면, 둘이 같을 경우 통과되고 그렇지 않으면 틀렸음을 알려준다.
<br />
<br /></p>

<h3 id="예시">예시</h3>

<p><code class="language-plaintext highlighter-rouge">arith.py</code> 라는 어떤 수행에 필요한 기능들을 담은 파일이 있다면 이 파일에 들어있는 모듈들을 검사하는 <code class="language-plaintext highlighter-rouge">test_arith.py</code> 를 만들어 테스팅을 진행하면 된다.</p>

<blockquote>
  <p>arith.py</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span>

<span class="k">def</span> <span class="nf">substract</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span><span class="o">-</span><span class="n">b</span>
</code></pre></div></div>

<blockquote>
  <p>test_arith.py</p>
</blockquote>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">unittest</span>
<span class="kn">import</span> <span class="nn">arith</span>

<span class="k">class</span> <span class="nc">TestArith</span><span class="p">(</span><span class="n">unittest</span><span class="p">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">setUp</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">tearDown</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
    
    <span class="k">def</span> <span class="nf">test_add</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">arith</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_subtract</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">arith</span><span class="p">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">unittest</span><span class="p">.</span><span class="n">main</span><span class="p">()</span>
</code></pre></div></div>
<p><br /></p>

<p>결과는 <code class="language-plaintext highlighter-rouge">test_add</code> 테스트는 통과하고 <code class="language-plaintext highlighter-rouge">test_subtract</code> 테스트는 결과 -1 과 예측값 1 이 다르므로 통과하지 못한다.</p>

<p><br />
<br /></p>

<h2 id="테스트-호출의-다른-방법">테스트 호출의 다른 방법</h2>

<p>위에 테스트 파일을 보면 <code class="language-plaintext highlighter-rouge">if __name__ == "__main__":</code> 로 테스트를 호출한 것을 볼 수 있는데 이 방법 대신에 터미널에서 <code class="language-plaintext highlighter-rouge">python -m unittest test_arith.py</code> 로 테스팅을 수행할 수 있다.</p>

<p><br /></p>
<hr />

<p><br /></p>

<h1 id="참조">참조</h1>
<p><a href="https://wikidocs.net/16107">50. unittest - 단위테스트</a></p>

  </section>
</div>

<div id="top" class="top-btn" onclick="moveTop()">
  <i class="fas fa-chevron-up"></i>
</div>

<!-- Disqus -->

<div id="comments">
  <div class="border">
    <div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'heeseok-jeong';
  (function () {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript></noscript>
  </div>
</div>


<!-- Footer -->
<footer>
  <div class="footer">
    Copyright © 2019
    <a href="https://github.com/NAYE0NG">Nayeong Kim</a>.
    Powered by Jekyll with
    <a href="https://github.com/naye0ng/Grape-Theme">Grape Theme</a>.
  </div>
</footer>


<script>
  var lastScrollTop = 0;
  window.onscroll = function () {
    var st = document.body.scrollTop || document.documentElement.scrollTop;
    if (st > 250) {
      document.getElementById("top").style.display = "block"
      if (st > lastScrollTop) {
        document.getElementById("top").style.opacity = 0
      } else {
        document.getElementById("top").style.opacity = 1
      }
    } else {
      document.getElementById("top").style.opacity = 0
      if (st > lastScrollTop) {
        document.getElementById("top").style.display = "none"
      }
    }
    lastScrollTop = st <= 0 ? 0 : st;
  }
  function moveTop() {
    document.body.scrollTop = 0
    document.documentElement.scrollTop = 0
  }
</script>
  </div>
</body>

</html>